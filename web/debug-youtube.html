<!DOCTYPE html>
<html>
<head>
    <title>YouTube iframe Debug</title>
    <style>
        body { margin: 20px; background: #000; color: white; font-family: Arial; }
        .container { margin-bottom: 30px; }
        .iframe-container { width: 800px; height: 450px; border: 2px solid #333; position: relative; }
        iframe { width: 100%; height: 100%; border: none; }
        .info { margin: 10px 0; padding: 10px; background: #333; border-radius: 5px; }
        .success { color: #0f0; }
        .error { color: #f00; }
        .warning { color: #ff0; }
    </style>
</head>
<body>
    <h1>🎬 YouTube Player Debug Test</h1>
    
    <div class="container">
        <h2>Test Video: cYgmnku6R3Y</h2>
        <div class="info">
            <strong>Expected URL:</strong><br>
            <span id="expected-url"></span>
        </div>
        
        <div class="iframe-container">
            <iframe id="youtube-iframe" src="" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
        </div>
        
        <div id="status" class="info">
            <strong>Status:</strong> <span id="status-text">Preparing...</span>
        </div>
        
        <div id="console-logs" class="info">
            <strong>Console Logs:</strong>
            <div id="logs"></div>
        </div>
        
        <button onclick="testCurrentURL()" style="padding: 10px 20px; margin: 10px 5px;">Test Current URL</button>
        <button onclick="testSimpleURL()" style="padding: 10px 20px; margin: 10px 5px;">Test Simple URL</button>
        <button onclick="testNoParamsURL()" style="padding: 10px 20px; margin: 10px 5px;">Test No Params</button>
    </div>

    <script>
        const videoId = 'cYgmnku6R3Y';
        const iframe = document.getElementById('youtube-iframe');
        const statusText = document.getElementById('status-text');
        const logsDiv = document.getElementById('logs');
        
        function log(message, type = 'info') {
            const timestamp = new Date().toLocaleTimeString();
            const logEntry = document.createElement('div');
            logEntry.className = type;
            logEntry.textContent = `[${timestamp}] ${message}`;
            logsDiv.appendChild(logEntry);
            console.log(message);
        }
        
        function setStatus(text, type = 'info') {
            statusText.textContent = text;
            statusText.className = type;
        }
        
        // Original Vue app URL (same as YouTubePlayer.vue)
        function getCurrentURL() {
            const params = new URLSearchParams({
                enablejsapi: '1',
                controls: '1',
                autoplay: '0',
                rel: '0',
                modestbranding: '1',
                playsinline: '1',
                fs: '1',
                origin: window.location.origin
            });
            
            return `https://www.youtube.com/embed/${videoId}?${params.toString()}`;
        }
        
        function getSimpleURL() {
            return `https://www.youtube.com/embed/${videoId}?enablejsapi=1&controls=1&origin=${encodeURIComponent(window.location.origin)}`;
        }
        
        function getNoParamsURL() {
            return `https://www.youtube.com/embed/${videoId}`;
        }
        
        function testURL(url, testName) {
            log(`🧪 Testing ${testName}...`);
            log(`📎 URL: ${url}`);
            setStatus(`Testing ${testName}...`, 'warning');
            
            let timeoutId = setTimeout(() => {
                log(`⏰ TIMEOUT: ${testName} failed to load in 15 seconds`, 'error');
                setStatus(`${testName} - TIMEOUT ERROR`, 'error');
            }, 15000);
            
            iframe.onload = function() {
                clearTimeout(timeoutId);
                log(`✅ SUCCESS: ${testName} loaded successfully`, 'success');
                setStatus(`${testName} - SUCCESS`, 'success');
            };
            
            iframe.onerror = function() {
                clearTimeout(timeoutId);
                log(`❌ ERROR: ${testName} failed to load`, 'error');
                setStatus(`${testName} - LOAD ERROR`, 'error');
            };
            
            iframe.src = url;
        }
        
        function testCurrentURL() {
            const url = getCurrentURL();
            testURL(url, 'Current YouTubePlayer.vue URL');
        }
        
        function testSimpleURL() {
            const url = getSimpleURL();
            testURL(url, 'Simple URL');
        }
        
        function testNoParamsURL() {
            const url = getNoParamsURL();
            testURL(url, 'No Params URL');
        }
        
        // Initialize
        document.getElementById('expected-url').textContent = getCurrentURL();
        
        // Auto-start with current URL
        setTimeout(() => {
            log('🚀 Starting automatic test with current URL...');
            testCurrentURL();
        }, 1000);
    </script>
</body>
</html> 